<!-- analyze.html -->
{% extends "layout.html" %}
{% block content %}
<h2>Text Analysis</h2>
<form id="analyze-form">
    <textarea name="text" id="text" rows="4" placeholder="Enter text here..."></textarea>
    <button type="submit">Analyze Text</button>
</form>
<div id="analysis-results"></div>

<script>
document.getElementById("analyze-form").onsubmit = async function(e) {
    e.preventDefault();
    const text = document.getElementById("text").value;
    const response = await fetch('/analyze', {
        method: 'POST', // This should be POST
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ text: text }),
    });
    const data = await response.json();
    document.getElementById("analysis-results").innerText = JSON.stringify(data, null, 2);
    
};
</script>
{% endblock %}
